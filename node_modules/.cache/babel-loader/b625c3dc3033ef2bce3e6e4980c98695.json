{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _objectSpread from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8;import{values}from'lodash';import React,{memo,useState,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import styled,{keyframes}from'styled-components';import TimelineModify from'./TimelineModify';import{historyListRequest}from\"features/history/reducer/historySlice\";import{useForm}from'react-hook-form';// 참고한 블로그 : https://code-masterjung.tistory.com/99\nimport LocalizationProvider from'@mui/lab/LocalizationProvider';import AdapterDateFns from'@mui/lab/AdapterDateFns';import{DatePicker}from\"@mui/lab\";import TextField from\"@mui/material/TextField\";import dayjs from\"dayjs\";import{triggerDateSelect}from'@fullcalendar/react';import{HistoryMap}from'..';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function TimelineLog(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),counter=_useState2[0],setCounter=_useState2[1];var _useState3=useState([{\"0\":{\"id\":\"25\",\"location\":\"비트캠프\",\"address\":\"서울 강남구 강남대로94길 20\",\"x\":\"127.029037792462\",\"y\":\"37.4994078625536\",\"log_date\":\"2021-12-20 05:06:55+00:00\",\"weather\":\"맑음\",\"log_type\":\"normal\",\"contents\":\"밥을 먹어요\",\"user_id\":\"1\"}},{\"1\":{\"id\":\"26\",\"location\":\"비트캠프\",\"address\":\"서울 강남구 강남대로94길 20\",\"x\":\"127.029037792462\",\"y\":\"37.4994078625536\",\"log_date\":\"2021-12-20 05:06:55+00:00\",\"weather\":\"맑음\",\"log_type\":\"normal\",\"contents\":\"너무 힘들어요..\",\"user_id\":\"1\"}}]),_useState4=_slicedToArray(_useState3,2),juudata=_useState4[0],setJuudata=_useState4[1];var dateFormat=function dateFormat(date){return dayjs(date).format(\"YYYY-MM-DD\");};var today=new window.Date();var _useState5=useState(dateFormat(today)),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];useEffect(function(){// alert('# 1 dispatch - historyRequest'),\ndispatch(historyListRequest({user_id:1,date:date}));},[date]);var dispatch=useDispatch();var mytest=useSelector(function(state){return state.history.historyData;});if(mytest!=null&&counter<1){// alert('# 7 component - historyRequest'),\nsetCounter(counter+1);setJuudata(mytest['data']);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{borderCollapse:\"collapse\",textAlign:\"right\"},children:[/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,children:/*#__PURE__*/_jsx(DatePicker,{views:[\"day\"],label:\"\\uB0A0\\uC9DC \\uC774\\uB3D9\",value:today,maxDate:\"2021-12-21\",onChange:function onChange(newValue){// triggerDateSelect\nsetDate(newValue);setJuudata(mytest['data']);},renderInput:function renderInput(params){return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{helperText:null}));}})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{children:\" Go!\"})]}),/*#__PURE__*/_jsx(HistoryMap,{data:juudata}),Object.keys(juudata).map(function(value,index,array){return/*#__PURE__*/_jsxs(TimelineItem,{children:[/*#__PURE__*/_jsxs(Date,{children:[juudata[value].log_date,\" ..\",/*#__PURE__*/_jsx(\"b\",{children:juudata[value].weather})]}),/*#__PURE__*/_jsx(Title,{children:juudata[value].log_type}),/*#__PURE__*/_jsxs(Contents,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:juudata[value].location}),\"\\uC5D0\\uC11C \",juudata[value].contents]}),/*#__PURE__*/_jsx(TimelineModify,{history:juudata[value]})]})]});})]});};var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n \\n\"])));var TimelineList=styled.ul(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n\\n  border-left: 2px solid ;\\n  list-style: none;\\n\"])));var TimelineItemContainer=styled.li(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  list-style: none;\\n\"])));var Date=styled.span(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  padding: 4px 12px;\\n  background: wheat;\\n  color: gray;\\n  border-radius: 16px;\\n\"])));var Title=styled.h4(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  margin: 16px 0 0;\\n  padding: 0;\\n  color: dimgray;\\n  opacity: 0.8;\\n  text-align:left;\\n\"])));var Contents=styled.p(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  margin: 8px 0 0;\\n  color: dimgray;\\n\"])));var animate=keyframes(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  0% {\\n    opacity: 0;\\n  }\\n  50% {\\n    opacity: 1;\\n  }\\n  100% {\\n    opacity: 0;\\n  }\\n\"])));var TimelineItem=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  position: relative;\\n  padding: 28px 20px;\\n  &:hover {\\n    background: rgba(105, 105, 105, 0.2);\\n    \",\" {\\n      background: seagreen;\\n      color: white;\\n      font-weight: bold;\\n    }\\n    \",\" {\\n      color: lime;\\n      font-weight: bold;\\n    }\\n    \",\" {\\n      color: gray;\\n    }\\n  }\\n  &::before {\\n    content: '';\\n    position: absolute;\\n    top: 32px;\\n    left: -7px;\\n    width: 12px;\\n    height: 12px;\\n    background: dimgray;\\n    border-radius: 50%;\\n    box-shadow: inset 0 0 10px rgba(0, 0, 0, 1);\\n  }\\n  &::after {\\n    content: '';\\n    position: absolute;\\n    top: 32px;\\n    left: -6px;\\n    width: 12px;\\n    height: 12px;\\n    background: lime;\\n    border-radius: 50%;\\n    box-shadow: inset 0 0 10px rgba(0, 255, 0, 1);\\n    opacity: 0;\\n  }\\n  &:hover::after {\\n    animation: \",\" 0.5s linear infinite;\\n  }\\n\"])),Date,Title,Contents,animate);","map":null,"metadata":{},"sourceType":"module"}