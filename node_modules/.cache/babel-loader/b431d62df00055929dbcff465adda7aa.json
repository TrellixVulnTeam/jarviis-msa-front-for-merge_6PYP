{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _toConsumableArray from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:/jarvis-final/jarviis-msa-front-for-merge/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2,_templateObject3;import React,{useEffect,useState}from\"react\";import sunny from\"features/diary/images/sunny.png\";import diaryimg1 from\"features/diary/images/a.png\";import diaryimg2 from\"features/diary/images/merged_image_2021-12-28.jpg\";import\"features/common/font/font.scss\";import styled from\"styled-components\";import TextField from\"@mui/material/TextField\";import AdapterDateFns from\"@mui/lab/AdapterDateFns\";import LocalizationProvider from\"@mui/lab/LocalizationProvider\";import{LayOut}from\"features/common\";import\"features/diary/style/Diary.scss\";import{DatePicker}from\"@mui/lab\";// import DiaryDetail from \"./DiaryDetail\";\nimport Table from\"@mui/material/Table\";import TableBody from\"@mui/material/TableBody\";import TableCell from\"@mui/material/TableCell\";import TableContainer from\"@mui/material/TableContainer\";import TableHead from\"@mui/material/TableHead\";import TableRow from\"@mui/material/TableRow\";import{useDispatch,useSelector}from\"react-redux\";import{diaryCreateRequest,diaryFindRequest}from\"features/diary/reducer/diarySlice\";import dayjs from\"dayjs\";import MemoModify from\"features/diary/components/MemoModify\";import'features/diary/style/DiaryText.scss';import Button from'@mui/material/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Diary(){var today=new Date();var dateFormat=function dateFormat(date){return dayjs(date).format(\"YYYY-MM-DD\");};var _useState=useState(today),_useState2=_slicedToArray(_useState,2),findDate=_useState2[0],setFindDate=_useState2[1];var _useState3=useState({data:{}}),_useState4=_slicedToArray(_useState3,2),diary=_useState4[0],setDiary=_useState4[1];var dispatch=useDispatch();var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),counter=_useState6[0],setCounter=_useState6[1];var addDate=function addDate(){// alert(\"카운터 바꿔~!\"),\nsetCounter(0),setFindDate(new Date(findDate.setDate(findDate.getDate()+1)));};var subDate=function subDate(e){e.preventdefault,setCounter(0),setFindDate(new Date(findDate.setDate(findDate.getDate()-1)));};useEffect(function(){initManuscript(),setCounter(0),dispatch(diaryFindRequest({user_id:1,diary_date:dateFormat(findDate)}));},[findDate]);// alert(`counter ${counter}`)\nvar findDiary=useSelector(function(state){return state.diary.diaryData;});if(findDiary!=null&&counter<1){setCounter(counter+1);// {Object.keys(findDiary).map((value, index, array) => (\n//   setDiary(findDiary)\n//   alert(`map :: ${JSON.stringify(findDiary[value])}`)\n// ))\n// }\nsetDiary(findDiary.data);// alert(`selector :: ${JSON.stringify(findDiary.data[0])}`)\n// alert(`setDiary :: ${JSON.stringify(diary)}`)\n}// {Object.keys(findDiary).map((value, index, array) => (\n//       setDiary(findDiary)\n//       alert(`map :: ${JSON.stringify(findDiary)}`)\n//     ))\n//     }\nvar _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),mode=_useState8[0],setMode=_useState8[1];function initManuscript(){var manuscript=document.querySelectorAll(\".manuscript\");var handleResize=function handleResize(){manuscript.forEach(function(elt){resizeMnuascriptContainer(elt);resizeImage(elt);});};window.addEventListener(\"load\",handleResize,{passive:true});window.addEventListener(\"resize\",handleResize,{passive:true});manuscript.forEach(function(element){element.querySelectorAll(\"p\").forEach(function(element){var text=element.innerText;element.innerHTML=\"\";_toConsumableArray(text).forEach(function(word){var span=document.createElement(\"span\");var textNode=document.createTextNode(word);span.appendChild(textNode);element.append(span);});});});handleResize();}function resizeMnuascriptContainer(element){element.style.width=\"\".concat((Math.floor(element.parentElement.offsetWidth/24)-1)*24-1,\"px\");}function resizeImage(element){element.querySelectorAll(\"img\").forEach(function(img){var naturalWidth=img.naturalWidth,naturalHeight=img.naturalHeight;var ratio=naturalHeight/naturalWidth;var newHeight=element.offsetWidth*ratio;img.height=Math.floor(newHeight-newHeight%32-8);});}initManuscript();// const updateDate = e => {\n// }\nreturn/*#__PURE__*/_jsx(LayOut,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"dp\",children:[/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"text\",onClick:function onClick(){dispatch(diaryCreateRequest({user_id:1}));},children:\"\\uC624\\uB298 \\uC77C\\uAE30 \\uB9CC\\uB4E4\\uAE30\"}),/*#__PURE__*/_jsx(TableContainer,{children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsx(TableRow,{})}),/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",style:{width:\"15vw\"},children:/*#__PURE__*/_jsx(\"img\",{class:\"wobble-hor-bottom\",style:{width:\"4vw\",cursor:\"pointer\"},src:require(\"features/diary/images/fingerl.png\").default,onClick:function onClick(e){return(// subDate(e)\n// setFindDate(new Date(findDate.setDate(findDate.getDate() - 1)))\nwindow.location.href=\"../diary/prev\");}})}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",style:{width:\"30%\"},children:/*#__PURE__*/_jsx(DiarySmallText,{children:findDate.toLocaleString(\"ko-KR\",{year:\"numeric\",month:\"long\",day:\"numeric\",weekday:\"long\"})})}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(DiarySmallText,{children:diary.weather}),/*#__PURE__*/_jsx(\"img\",{style:{width:\"5vw\"},src:sunny})]}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",style:{width:\"15%\"},children:findDate.getDate()<today.getDate()?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"img\",{class:\"wobble-hor-bottom\",style:{width:\"4vw\",cursor:\"pointer\",visibility:\"visible\"},src:require(\"features/diary/images/fingerr.png\").default,onClick:function onClick(){return(// setFindDate(new Date(findDate.setDate(findDate.getDate() + 1)))\naddDate());}})}):/*#__PURE__*/_jsx(\"img\",{class:\"wobble-hor-bottom\",style:{width:\"20%\",cursor:\"pointer\",visibility:\"hidden\"},src:require(\"features/diary/images/fingerr.png\").default})})]}),/*#__PURE__*/_jsx(TableRow,{sx:{border:0,textAlign:\"center\"},children:/*#__PURE__*/_jsx(TableCell,{component:\"td\",colSpan:\"6\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(DiarySmallText,{children:\"\\uC81C\\uBAA9 : \\uC548\\uC8FC\\uD604\\uC758 \\uADF8\\uB9BC \\uC77C\\uAE30\"})})}),/*#__PURE__*/_jsx(TableRow,{sx:{border:0},children:/*#__PURE__*/_jsx(TableCell,{component:\"td\",colSpan:\"6\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(DiarySmallText,{children:/*#__PURE__*/_jsx(\"img\",{class:\"diary-img\",src:diaryimg1})})})}),/*#__PURE__*/_jsx(TableRow,{sx:{border:0},children:/*#__PURE__*/_jsx(TableCell,{component:\"td\",colSpan:\"6\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"div\",{class:\"manuscript-all\",id:\"diaryText\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"manuscript\",children:/*#__PURE__*/_jsx(\"p\",{children:diary.contents})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"manuscript-all\",id:\"diaryText\",children:[/*#__PURE__*/_jsx(\"tr\",{children:mode==0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{class:\"diary-pencil\",src:require(\"features/diary/images/edit.png\").default,onClick:function onClick(){return setMode(1);}})}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uCF54\\uBA58\\uD2B8\\uB97C \\uB2EC\\uC544\\uBCF4\\uC790!\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{class:\"diary-pencil\",src:require(\"features/diary/images/edit.png\").default,onClick:function onClick(){return setMode(0);}})}),/*#__PURE__*/_jsx(\"h2\",{children:\"\\uADF8\\uB9CC \\uD560\\uB798!\"})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"manuscript\",children:mode==0?/*#__PURE__*/_jsx(\"p\",{children:diary.memo}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(MemoModify,{data:diary})})})]})]})})})]})]})})]})});}var DiaryText=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  font-family: \\\"UhBeeRami\\\";\\n  font-size: 2vw;\\n  font-weight: bold;\\n\"])));var DiarySmallText=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-family: \\\"UhBeeRami\\\";\\n  font-size: 2vw;\\n  font-weight: bold;\\n\"])));var TR=styled.tr(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 50%;\\n\"])));","map":null,"metadata":{},"sourceType":"module"}