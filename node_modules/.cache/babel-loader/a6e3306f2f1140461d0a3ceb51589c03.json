{"ast":null,"code":"var _jsxFileName = \"D:\\\\jarvis-final\\\\jarviis-msa-front-for-merge\\\\src\\\\features\\\\diary\\\\components\\\\DiaryTest.js\";\nimport React, { useEffect, useState } from \"react\";\nimport sunny from \"features/diary/images/sunny.png\";\nimport diaryimg1 from \"features/diary/images/a.png\";\nimport diaryimg2 from \"features/diary/images/merged_image_2021-12-28.jpg\";\nimport \"features/common/font/font.scss\";\nimport styled from \"styled-components\";\nimport TextField from \"@mui/material/TextField\";\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport { LayOut } from \"features/common\";\nimport \"features/diary/style/Diary.scss\";\nimport { DatePicker } from \"@mui/lab\"; // import DiaryDetail from \"./DiaryDetail\";\n\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { diaryCreateRequest, diaryFindRequest } from \"features/diary/reducer/diarySlice\";\nimport dayjs from \"dayjs\";\nimport MemoModify from \"features/diary/components/MemoModify\";\nimport 'features/diary/style/DiaryText.scss';\nimport Button from '@mui/material/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DiaryTest() {\n  const dtoday = new Date();\n  const today = new Date(dtoday.setDate(dtoday.getDate() - 1));\n\n  const dateFormat = date => dayjs(date).format(\"YYYY-MM-DD\");\n\n  const [findDate, setFindDate] = useState(today);\n  const [diary, setDiary] = useState({\n    data: {}\n  });\n  const dispatch = useDispatch();\n  const [counter, setCounter] = useState(0);\n\n  const addDate = () => {\n    // alert(\"카운터 바꿔~!\"),\n    setCounter(0), setFindDate(new Date(findDate.setDate(findDate.getDate() + 1)));\n  };\n\n  const subDate = e => {\n    e.preventdefault, setCounter(0), setFindDate(new Date(findDate.setDate(findDate.getDate() - 1)));\n  };\n\n  useEffect(() => {\n    initManuscript(), setCounter(0), dispatch(diaryFindRequest({\n      user_id: 1,\n      diary_date: dateFormat(findDate)\n    }));\n  }, [findDate]); // alert(`counter ${counter}`)\n\n  const findDiary = useSelector(state => state.diary.diaryData);\n\n  if (findDiary != null && counter < 1) {\n    setCounter(counter + 1); // {Object.keys(findDiary).map((value, index, array) => (\n    //   setDiary(findDiary)\n    //   alert(`map :: ${JSON.stringify(findDiary[value])}`)\n    // ))\n    // }\n\n    setDiary(findDiary.data); // alert(`selector :: ${JSON.stringify(findDiary.data[0])}`)\n    // alert(`setDiary :: ${JSON.stringify(diary)}`)\n  } // {Object.keys(findDiary).map((value, index, array) => (\n  //       setDiary(findDiary)\n  //       alert(`map :: ${JSON.stringify(findDiary)}`)\n  //     ))\n  //     }\n\n\n  const [mode, setMode] = useState(0);\n\n  function initManuscript() {\n    const manuscript = document.querySelectorAll(\".manuscript\");\n\n    const handleResize = () => {\n      manuscript.forEach(elt => {\n        resizeMnuascriptContainer(elt);\n        resizeImage(elt);\n      });\n    };\n\n    window.addEventListener(\"load\", handleResize, {\n      passive: true\n    });\n    window.addEventListener(\"resize\", handleResize, {\n      passive: true\n    });\n    manuscript.forEach(element => {\n      element.querySelectorAll(\"p\").forEach(element => {\n        const text = element.innerText;\n        element.innerHTML = \"\";\n        [...text].forEach(word => {\n          const span = document.createElement(\"span\");\n          const textNode = document.createTextNode(word);\n          span.appendChild(textNode);\n          element.append(span);\n        });\n      });\n    });\n    handleResize();\n  }\n\n  function resizeMnuascriptContainer(element) {\n    element.style.width = `${(Math.floor(element.parentElement.offsetWidth / 24) - 1) * 24 - 1}px`;\n  }\n\n  function resizeImage(element) {\n    element.querySelectorAll(\"img\").forEach(img => {\n      const {\n        naturalWidth,\n        naturalHeight\n      } = img;\n      const ratio = naturalHeight / naturalWidth;\n      const newHeight = element.offsetWidth * ratio;\n      img.height = Math.floor(newHeight - newHeight % 32 - 8);\n    });\n  }\n\n  initManuscript(); // const updateDate = e => {\n  // }\n\n  return /*#__PURE__*/_jsxDEV(LayOut, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dp\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        variant: \"text\",\n        onClick: () => {\n          dispatch(diaryCreateRequest({\n            user_id: 1\n          }));\n        },\n        children: \"\\uC624\\uB298 \\uC77C\\uAE30 \\uB9CC\\uB4E4\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: [/*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                style: {\n                  width: \"15vw\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  class: \"wobble-hor-bottom\",\n                  style: {\n                    width: \"4vw\",\n                    cursor: \"pointer\"\n                  },\n                  src: require(\"features/diary/images/fingerl.png\").default,\n                  onClick: e => subDate(e) // setFindDate(new Date(findDate.setDate(findDate.getDate() - 1)))\n\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                style: {\n                  width: \"30%\"\n                },\n                children: /*#__PURE__*/_jsxDEV(DiarySmallText, {\n                  children: findDate.toLocaleString(\"ko-KR\", {\n                    year: \"numeric\",\n                    month: \"long\",\n                    day: \"numeric\",\n                    weekday: \"long\"\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 182,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                children: [/*#__PURE__*/_jsxDEV(DiarySmallText, {\n                  children: diary.weather\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  style: {\n                    width: \"5vw\"\n                  },\n                  src: sunny\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"center\",\n                style: {\n                  width: \"15%\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  class: \"wobble-hor-bottom\",\n                  style: {\n                    width: \"4vw\",\n                    cursor: \"pointer\",\n                    visibility: \"visible\"\n                  },\n                  src: require(\"features/diary/images/fingerr.png\").default,\n                  onClick: () => // setFindDate(new Date(findDate.setDate(findDate.getDate() + 1)))\n                  // addDate()\n                  window.location.href = \"../diary/diary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableRow, {\n              sx: {\n                border: 0,\n                textAlign: \"center\"\n              },\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"td\",\n                colSpan: \"6\",\n                style: {\n                  textAlign: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(DiarySmallText, {\n                  children: \"\\uC81C\\uBAA9 : \\uC548\\uC8FC\\uD604\\uC758 \\uADF8\\uB9BC \\uC77C\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableRow, {\n              sx: {\n                border: 0\n              },\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"td\",\n                colSpan: \"6\",\n                style: {\n                  textAlign: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(DiarySmallText, {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    class: \"diary-img\",\n                    src: diaryimg2\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 241,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 240,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(TableRow, {\n              sx: {\n                border: 0\n              },\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                component: \"td\",\n                colSpan: \"6\",\n                style: {\n                  textAlign: \"center\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"manuscript-all\",\n                  id: \"diaryText\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"manuscript\",\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: diary.contents\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 254,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"manuscript-all\",\n                    id: \"diaryText\",\n                    children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: mode == 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            class: \"diary-pencil\",\n                            src: require(\"features/diary/images/edit.png\").default,\n                            onClick: () => setMode(1)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 261,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 260,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                          children: \"\\uCF54\\uBA58\\uD2B8\\uB97C \\uB2EC\\uC544\\uBCF4\\uC790!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 262,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            class: \"diary-pencil\",\n                            src: require(\"features/diary/images/edit.png\").default,\n                            onClick: () => setMode(0)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 265,\n                            columnNumber: 29\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 264,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                          children: \"\\uADF8\\uB9CC \\uD560\\uB798!\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 266,\n                          columnNumber: 65\n                        }, this)]\n                      }, void 0, true)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 258,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      class: \"manuscript\",\n                      children: mode == 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n                        children: diary.memo\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 27\n                      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                        children: /*#__PURE__*/_jsxDEV(MemoModify, {\n                          data: diary\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 274,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 268,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n}\nconst DiaryText = styled.div`\n  font-family: \"UhBeeRami\";\n  font-size: 2vw;\n  font-weight: bold;\n`;\nconst DiarySmallText = styled.div`\n  font-family: \"UhBeeRami\";\n  font-size: 2vw;\n  font-weight: bold;\n`;\nconst TR = styled.tr`\n  width: 50%;\n`;","map":{"version":3,"sources":["D:/jarvis-final/jarviis-msa-front-for-merge/src/features/diary/components/DiaryTest.js"],"names":["React","useEffect","useState","sunny","diaryimg1","diaryimg2","styled","TextField","AdapterDateFns","LocalizationProvider","LayOut","DatePicker","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","useDispatch","useSelector","diaryCreateRequest","diaryFindRequest","dayjs","MemoModify","Button","DiaryTest","dtoday","Date","today","setDate","getDate","dateFormat","date","format","findDate","setFindDate","diary","setDiary","data","dispatch","counter","setCounter","addDate","subDate","e","preventdefault","initManuscript","user_id","diary_date","findDiary","state","diaryData","mode","setMode","manuscript","document","querySelectorAll","handleResize","forEach","elt","resizeMnuascriptContainer","resizeImage","window","addEventListener","passive","element","text","innerText","innerHTML","word","span","createElement","textNode","createTextNode","appendChild","append","style","width","Math","floor","parentElement","offsetWidth","img","naturalWidth","naturalHeight","ratio","newHeight","height","cursor","require","default","toLocaleString","year","month","day","weekday","weather","visibility","location","href","border","textAlign","contents","memo","DiaryText","div","DiarySmallText","TR","tr"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport sunny from \"features/diary/images/sunny.png\";\nimport diaryimg1 from \"features/diary/images/a.png\";\nimport diaryimg2 from \"features/diary/images/merged_image_2021-12-28.jpg\";\nimport \"features/common/font/font.scss\";\nimport styled from \"styled-components\";\nimport TextField from \"@mui/material/TextField\";\nimport AdapterDateFns from \"@mui/lab/AdapterDateFns\";\nimport LocalizationProvider from \"@mui/lab/LocalizationProvider\";\nimport { LayOut } from \"features/common\";\nimport \"features/diary/style/Diary.scss\";\nimport { DatePicker } from \"@mui/lab\";\n// import DiaryDetail from \"./DiaryDetail\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableHead from \"@mui/material/TableHead\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { diaryCreateRequest, diaryFindRequest } from \"features/diary/reducer/diarySlice\";\nimport dayjs from \"dayjs\";\nimport MemoModify from \"features/diary/components/MemoModify\"\nimport 'features/diary/style/DiaryText.scss'\nimport Button from '@mui/material/Button';\n\n\n\n\n\n\n\nexport default function DiaryTest() {\n  const dtoday = new Date()\n  const today = new Date(dtoday.setDate(dtoday.getDate() - 1))\n  const dateFormat = (date) => dayjs(date).format(\"YYYY-MM-DD\");\n  const [findDate, setFindDate] = useState(today);\n  const [diary, setDiary] = useState(\n    { data: {} }\n  )\n  const dispatch = useDispatch()\n  const [counter, setCounter] = useState(0)\n  const addDate = () => {\n    // alert(\"카운터 바꿔~!\"),\n    setCounter(0),\n      setFindDate(new Date(findDate.setDate(findDate.getDate() + 1)))\n  }\n  const subDate = e => {\n    e.preventdefault,\n      setCounter(0),\n      setFindDate(new Date(findDate.setDate(findDate.getDate() - 1)))\n  }\n  useEffect(() => {\n    initManuscript(),\n      setCounter(0),\n      dispatch(diaryFindRequest({\n        user_id: 1,\n        diary_date: dateFormat(findDate)\n      }))\n  }, [findDate]);\n  // alert(`counter ${counter}`)\n  const findDiary = useSelector(state => state.diary.diaryData)\n  if (findDiary != null && counter < 1) {\n    setCounter(counter + 1)\n    // {Object.keys(findDiary).map((value, index, array) => (\n    //   setDiary(findDiary)\n    //   alert(`map :: ${JSON.stringify(findDiary[value])}`)\n    // ))\n    // }\n    setDiary(findDiary.data)\n    // alert(`selector :: ${JSON.stringify(findDiary.data[0])}`)\n    // alert(`setDiary :: ${JSON.stringify(diary)}`)\n  }\n  // {Object.keys(findDiary).map((value, index, array) => (\n  //       setDiary(findDiary)\n  //       alert(`map :: ${JSON.stringify(findDiary)}`)\n  //     ))\n  //     }\n  const [mode, setMode] = useState(0)\n  function initManuscript() {\n    const manuscript = document.querySelectorAll(\".manuscript\");\n    const handleResize = () => {\n      manuscript.forEach((elt) => {\n        resizeMnuascriptContainer(elt);\n        resizeImage(elt);\n      });\n    };\n\n    window.addEventListener(\"load\", handleResize, { passive: true });\n    window.addEventListener(\"resize\", handleResize, { passive: true });\n\n    manuscript.forEach((element) => {\n      element.querySelectorAll(\"p\").forEach((element) => {\n        const text = element.innerText;\n\n        element.innerHTML = \"\";\n        [...text].forEach((word) => {\n          const span = document.createElement(\"span\");\n          const textNode = document.createTextNode(word);\n\n          span.appendChild(textNode);\n          element.append(span);\n        });\n      });\n    });\n\n    handleResize();\n  }\n  function resizeMnuascriptContainer(element) {\n    element.style.width = `${(Math.floor(element.parentElement.offsetWidth / 24) - 1) * 24 - 1\n      }px`;\n  }\n\n  function resizeImage(element) {\n    element.querySelectorAll(\"img\").forEach((img) => {\n      const { naturalWidth, naturalHeight } = img;\n      const ratio = naturalHeight / naturalWidth;\n      const newHeight = element.offsetWidth * ratio;\n\n      img.height = Math.floor(newHeight - (newHeight % 32) - 8);\n    });\n  }\n\n  initManuscript();\n  // const updateDate = e => {\n\n  // }\n\n  return (\n    <LayOut>\n      <div className=\"dp\">\n        <Button type=\"submit\" variant=\"text\"\n          onClick={\n            () => {\n              dispatch(diaryCreateRequest({\n                user_id: 1\n              }))\n            }\n          } >오늘 일기 만들기</Button>\n\n        <TableContainer>\n          <Table>\n            <TableHead>\n              <TableRow></TableRow>\n            </TableHead>\n            <TableBody>\n              <TableRow>\n                <TableCell align=\"center\" style={{ width: \"15vw\" }}>\n                  <img\n                    class=\"wobble-hor-bottom\"\n                    style={{ width: \"4vw\", cursor: \"pointer\" }}\n                    src={\n                      require(\"features/diary/images/fingerl.png\").default\n                    }\n                    onClick={e =>\n                      subDate(e)\n                      // setFindDate(new Date(findDate.setDate(findDate.getDate() - 1)))\n                    }\n                  />\n                </TableCell>\n                {/* <TableCell>\n                  <div className=\"Watch\">\n                    <div style={{ borderCollapse: \"collapse\" }}>\n                      <LocalizationProvider dateAdapter={AdapterDateFns}>\n                        <DatePicker\n                          views={[\"day\"]}\n                          label=\"날짜 이동\"\n                          value={diary.diary_date}\n                          maxDate={today}\n                          onChange={(newValue) => {\n                            setFindDate(newValue);\n                          }}\n                          renderInput={(params) => (\n                            <TextField {...params} helperText={null} />\n                          )}\n                        />\n                      </LocalizationProvider>\n                    </div>\n                  </div>\n                </TableCell> */}\n                <TableCell align=\"center\" style={{ width: \"30%\" }}>\n                  <DiarySmallText>\n                    {findDate.toLocaleString(\"ko-KR\", {\n                      year: \"numeric\",\n                      month: \"long\",\n                      day: \"numeric\",\n                      weekday: \"long\",\n                    })}\n                  </DiarySmallText>\n                </TableCell>\n                {/* <TableCell style={{ textAlign: \"center\", width: \"15%\" }}>\n                  <img\n                    style={{ width: \"16vw\", cursor: \"pointer\" }}\n                    src={require(\"features/diary/images/today.png\").default}\n                    onClick={() => {\n                      // setFindDate(today)\n                      window.location.href=\"../diary/diary\"\n                    }}\n                  />\n                </TableCell> */}\n                <TableCell align=\"center\">\n                  <DiarySmallText>{diary.weather}</DiarySmallText>\n                  <img style={{ width: \"5vw\" }} src={sunny} />\n                </TableCell>\n                <TableCell align=\"center\" style={{ width: \"15%\" }}>\n                  <img\n                    class=\"wobble-hor-bottom\"\n                    style={{\n                      width: \"4vw\",\n                      cursor: \"pointer\",\n                      visibility: \"visible\",\n                    }}\n                    src={\n                      require(\"features/diary/images/fingerr.png\")\n                        .default\n                    }\n                    onClick={() =>\n                      // setFindDate(new Date(findDate.setDate(findDate.getDate() + 1)))\n                      // addDate()\n                      window.location.href = \"../diary/diary\"\n                    }\n                  />\n                </TableCell>\n              </TableRow>\n              <TableRow sx={{ border: 0, textAlign: \"center\" }}>\n                <TableCell\n                  component=\"td\"\n                  colSpan=\"6\"\n                  style={{ textAlign: \"center\" }}\n                >\n                  <DiarySmallText>제목 : 안주현의 그림 일기</DiarySmallText>\n                </TableCell>\n              </TableRow>\n              <TableRow sx={{ border: 0 }}>\n                <TableCell\n                  component=\"td\"\n                  colSpan=\"6\"\n                  style={{ textAlign: \"center\" }}\n                >\n                  <DiarySmallText>\n                    <img class=\"diary-img\" src={diaryimg2} />\n                    {/* <img class=\"diary-img2\" src=\"src/features/diary/images/merged_image_2021-12-28.jpg\" /> */}\n                  </DiarySmallText>\n                </TableCell>\n              </TableRow>\n              <TableRow sx={{ border: 0 }}>\n                <TableCell\n                  component=\"td\"\n                  colSpan=\"6\"\n                  style={{ textAlign: \"center\" }}\n                >\n                  <div class=\"manuscript-all\" id=\"diaryText\">\n                    <div class=\"manuscript\">\n                      <p>{diary.contents}</p>\n                    </div>\n                    <br />\n                    <div class=\"manuscript-all\" id=\"diaryText\">\n                      <tr>\n                        {mode == 0 ?\n                          <><td>\n                            <img class=\"diary-pencil\" src={require(\"features/diary/images/edit.png\").default}\n                              onClick={() => setMode(1)} /></td><h2>코멘트를 달아보자!</h2></>\n                          :\n                          <><td>\n                            <img class=\"diary-pencil\" src={require(\"features/diary/images/edit.png\").default}\n                              onClick={() => setMode(0)} /></td><h2>그만 할래!</h2></>}\n                      </tr>\n                      <div class=\"manuscript\">\n                        {mode == 0 ?\n                          <p>\n                            {diary.memo}\n                          </p>\n                          : <>\n                            <MemoModify data={diary} />\n                          </>}\n                      </div>\n\n                    </div>\n                  </div>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </div>\n    </LayOut>\n  );\n}\n\nconst DiaryText = styled.div`\n  font-family: \"UhBeeRami\";\n  font-size: 2vw;\n  font-weight: bold;\n`;\nconst DiarySmallText = styled.div`\n  font-family: \"UhBeeRami\";\n  font-size: 2vw;\n  font-weight: bold;\n`\nconst TR = styled.tr`\n  width: 50%;\n`;\n"]},"metadata":{},"sourceType":"module"}